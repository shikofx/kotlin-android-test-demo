= Урок 1: Nginx как обратный прокси (Reverse Proxy)

В нашей инфраструктуре Nginx выполняет роль **обратного прокси**. Это фундаментальная концепция, которую важно понимать.

== Что такое обратный прокси?

**Обратный прокси** — это сервер, который находится между конечным пользователем (браузером) и вашими внутренними сервисами (GitLab, MinIO и т.д.). Он принимает все входящие запросы из интернета и, в зависимости от запрошенного домена, перенаправляет их на нужный сервис.

Пользователь общается только с Nginx, не зная, какие именно сервисы работают "за ним".

== Зачем это нужно в нашем проекте?

. **Единая точка входа:** Все наши сервисы доступны через стандартные порты 80 (HTTP) и 443 (HTTPS). Nginx — единственный, кто слушает эти порты, что решает проблему "порт уже занят".

. **Централизованное управление SSL/TLS:** Nginx берет на себя всю работу с HTTPS. Он "терминирует" SSL-соединение, то есть расшифровывает запрос от пользователя и отправляет его внутреннему сервису по обычному, незащищенному HTTP. Это упрощает конфигурацию самих сервисов (им не нужно настраивать SSL).

. **Гибкая маршрутизация:** Nginx смотрит на домен в запросе (`gitlab.<...>` или `s3.<...>`) и решает, какому внутреннему сервису (работающему на порту `8081` или `9002`) его передать.

. **Безопасность:** Внутренние сервисы "спрятаны" от прямого доступа из интернета.

== Наша архитектура

----
                               +----------------+
                               |                |
 Browser <--- (HTTPS: 443) --->|     Nginx      |
                               | (Reverse Proxy)|
                               |                |
                               +-------+--------+
                                       |
           +---------------------------+---------------------------+
           | (HTTP)                                                | (HTTP)
           v                                                       v
  +----------------+                                      +----------------+
  | GitLab         |                                      | MinIO          |
  | (localhost:8081) |                                      | (localhost:9002) |
  +----------------+                                      +----------------+
----