= Интеграция PMD в CI/CD

Цель этого шага — автоматически запускать статический анализ PMD при каждом изменении кода, чтобы выявлять потенциальные проблемы как можно раньше.

== Логика работы в CI

Анализ PMD является частью основной задачи `build_and_analyze` в файле `.github/workflows/android-ci.yml`. Он выполняется *до* сборки APK, что позволяет быстро получить обратную связь.

Ключевые шаги:

. **Запуск анализатора:**
+
[source,yaml]
----
- name: Run Static Analysis (PMD)
  run: ./gradlew app:pmdDebug
----

. **Загрузка артефактов:**
+
Результаты анализа (HTML и XML отчеты) загружаются как артефакты сборки. Это позволяет скачать их для детального изучения, даже если пайплайн упал на последующих шагах.
+
[source,yaml]
----
- name: Upload analysis reports
  if: always()
  uses: actions/upload-artifact@v4
  with:
    name: static-analysis-reports
    path: app/build/reports/
----

== Quality Gate (Контроль качества)

На данном этапе в файле `gradle/pmd.gradle` установлена опция `ignoreFailures = true`. Это означает, что наличие нарушений, найденных PMD, **не приведет к падению сборки**. Пайплайн продолжит выполняться, но отчет с нарушениями все равно будет сгенерирован и опубликован.

Это стандартная практика при внедрении статического анализа в существующий проект, позволяющая постепенно исправлять технический долг, не блокируя разработку.