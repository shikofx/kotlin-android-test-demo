= Урок 2: Настройка Java

**Цель:** Добавить в пайплайн шаг для установки Java (JDK). Это обязательное условие для сборки любого Android-проекта.

== Ключевые концепции

* *`actions/setup-java`*: Готовое действие (action) для установки и настройки определенной версии JDK на виртуальной машине (раннере).
* *JDK (Java Development Kit)*: Набор инструментов для разработки на языке Java, который включает в себя компилятор и стандартные библиотеки. Android-приложения, даже написанные на Kotlin, компилируются в байт-код для виртуальной машины Java (JVM), поэтому JDK является обязательным компонентом.
---

== Шаг 1: Обновление файла Workflow

После шага `Checkout code` добавим новый шаг для установки Java. Наш тестовый шаг `ls -la` из предыдущего урока больше не нужен.

[source,yaml,subs="callouts"]
----
name: Android CI

on:
  push:
    branches: [ '**' ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    name: Build and Test
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up JDK 17 <1>
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
<1> Используем action `setup-java` для установки JDK версии 17. `distribution: 'temurin'` указывает на популярный и надежный дистрибутив OpenJDK.
----

=== Детальный разбор шага

Рассмотрим блок `Set up JDK 17` подробнее:

* *`name: Set up JDK 17`*: Это просто название шага, которое будет отображаться в логах GitHub Actions.
* *`uses: actions/setup-java@v4`*: Мы используем готовое действие `setup-java` от GitHub. Оно само скачивает и настраивает нужную версию Java, избавляя нас от необходимости писать скрипты для этого вручную. Указание версии `@v4` гарантирует, что наш пайплайн не сломается при выходе новых, обратно несовместимых версий этого action.
* *`with:`*: Этот блок позволяет передать параметры в action.
* *`java-version: '17'`*: Главный параметр. Мы указываем, что нам нужна именно 17-я версия Java. Это важно, так как современные Android-проекты требуют свежих версий JDK.
* *`distribution: 'temurin'`*: Указывает, какой дистрибутив JDK использовать. `temurin` (ранее известный как AdoptOpenJDK) — это популярный, бесплатный и поддерживаемый сообществом дистрибутив OpenJDK. Это надежный выбор для CI/CD.

== Шаг 2: Что делает новый пайплайн?

. Как и раньше, он запускается на `push` или `pull_request`.
. Клонирует ваш репозиторий.
. **(Новое)** Устанавливает Java Development Kit (JDK) версии 17.

После коммита этих изменений перейдите на вкладку **Actions**. Вы увидите, что пайплайн успешно выполнил два шага: скачал код и установил Java. Теперь наша виртуальная машина готова к следующему этапу — сборке проекта.