= Интеграция PMD в CI/CD

**Цель:** Автоматически запускать статический анализ PMD при каждом изменении кода, чтобы выявлять потенциальные проблемы, такие как неиспользуемые переменные, пустые блоки кода, избыточное создание объектов и другие "code smells".

== Логика работы в CI

Анализ PMD является частью основной задачи `build_and_analyze` в файле `.github/workflows/android-ci.yml`. Он выполняется *до* сборки APK, что позволяет быстро получить обратную связь.

. **Конфигурация:**
+
Набор правил для PMD находится в файле `config/pmd/pmd-ruleset.xml`. Конфигурация самого Gradle-плагина — в `gradle/pmd.gradle`.

. **Запуск анализатора:**
+
[source,yaml]
----
- name: Run Static Analysis (PMD)
  run: ./gradlew app:pmdDebug
----

. **Публикация отчета:**
+
После выполнения анализа специальный скрипт в CI/CD пайплайне находит сгенерированный HTML-отчет, копирует его и добавляет ссылку на него на общую страницу отчетов на GitHub Pages.
+
== Quality Gate (Контроль качества)

В файле `gradle/pmd.gradle` установлена опция `ignoreFailures = true`. Это означает, что наличие нарушений, найденных PMD, **не приведет к падению сборки**. Пайплайн продолжит выполняться, но отчет с нарушениями все равно будет сгенерирован и опубликован.

Это стандартная практика при внедрении статического анализа в существующий проект, позволяющая постепенно исправлять технический долг, не блокируя разработку.