# Управление пользователями в Linux (Ubuntu/Debian)

Правильное управление пользователями — основа безопасности и порядка на любом Linux-сервере. Работать напрямую под пользователем `root` считается плохой практикой. Вместо этого следует создать отдельного пользователя с правами `sudo`.

## 1. Создание нового пользователя

Команда `adduser` — это интерактивный и наиболее предпочтительный способ создания нового пользователя в системах на базе Debian/Ubuntu.

```bash
# Замените <username> на желаемое имя пользователя, например, devuser
sudo adduser <username>
```

Система последовательно задаст вам несколько вопросов:
1.  **Пароль:** Попросит ввести и подтвердить новый пароль для пользователя.
2.  **Информация о пользователе:** Запросит полное имя, номер комнаты, рабочий телефон и т.д. Эти поля можно оставить пустыми, нажимая `Enter`.
3.  **Подтверждение:** В конце спросит, верна ли информация (`Is the information correct? [Y/n]`). Нажмите `Y` и `Enter`.

## 2. Предоставление прав администратора (`sudo`)

Чтобы новый пользователь мог выполнять команды от имени администратора (например, устанавливать программы или редактировать системные файлы), его нужно добавить в группу `sudo`.

```bash
# Замените <username> на имя вашего пользователя
sudo usermod -aG sudo <username>
```

*   `usermod`: команда для модификации пользователя.
*   `-aG`: флаги, означающие "добавить" (`-a`) в "дополнительную группу" (`-G`).
*   `sudo`: имя группы.

## 3. Переключение на другого пользователя

Чтобы войти в сессию нового пользователя, не разрывая текущее соединение, используйте команду `su`.

```bash
su - <username>
```

*   Флаг `-` (или `-l`, `--login`) обеспечивает полный вход в окружение нового пользователя: домашняя директория изменится на `/home/<username>`, и применятся все его настройки профиля.

## 4. Добавление SSH-ключа для входа без пароля (Рекомендуется)

После создания пользователя настоятельно рекомендуется настроить для него вход по SSH-ключу. Это безопаснее и удобнее, чем вход по паролю.

1.  **На вашем локальном компьютере** скопируйте ваш публичный SSH-ключ. Если у вас его нет, создайте командой `ssh-keygen -t ed25519`.
    ```bash
    # macOS
    pbcopy < ~/.ssh/id_ed25519.pub
    # Linux (требуется xclip)
    xclip -selection clipboard < ~/.ssh/id_ed25519.pub
    # Или просто выведите его содержимое для копирования вручную
    cat ~/.ssh/id_ed25519.pub
    ```

2.  **На сервере**, войдя под новым пользователем (`su - <username>`), выполните следующие команды, чтобы добавить ваш ключ:
    ```bash
    mkdir -p ~/.ssh && chmod 700 ~/.ssh
    echo "PASTE_YOUR_PUBLIC_KEY_HERE" >> ~/.ssh/authorized_keys
    chmod 600 ~/.ssh/authorized_keys
    ```
    Замените `PASTE_YOUR_PUBLIC_KEY_HERE` на ваш ключ, скопированный на шаге 1. Самый простой способ — использовать команду `ssh-copy-id` с вашего локального компьютера.

## 4. Удаление пользователя

Если пользователь больше не нужен, его можно удалить.

```bash
# Простое удаление пользователя (домашняя папка останется)
sudo deluser <username>

# Удаление пользователя вместе с его домашней директорией
sudo deluser --remove-home <username>
```