# Урок 8: Как вести один проект в двух репозиториях (GitHub и GitLab)

Да, это не только возможно, но и является распространенной практикой. Вы можете настроить ваш локальный Git-репозиторий так, чтобы он был связан сразу с несколькими удаленными репозиториями. Это позволяет, например, использовать GitHub как публичное зеркало, а GitLab — как основную площадку для CI/CD и внутренней разработки.

## Зачем это нужно?

*   **Резервное копирование:** Хранение кода на двух независимых платформах.
*   **Использование лучших функций:** Вы можете использовать GitHub Actions для публичного CI и GitLab CI для более сложных или приватных задач на своем сервере.
*   **Публичное/приватное зеркало:** Основная работа ведется в приватном репозитории (GitLab), а публичная версия для open-source сообщества находится на GitHub.

## Шаг 1: Просмотр текущих удаленных репозиториев

Сначала давайте посмотрим, какие удаленные репозитории уже настроены. Обычно после клонирования с GitHub у вас будет один репозиторий с именем `origin`.

```bash
git remote -v
```

Вывод будет примерно таким:
```
origin  git@github.com:username/project-name.git (fetch)
origin  git@github.com:username/project-name.git (push)
```

## Шаг 2: Добавление второго удаленного репозитория (GitLab)

Теперь добавим ваш GitLab-репозиторий как второй "удаленный сервер". Дадим ему понятное имя, например, `gitlab`.

```bash
git remote add gitlab git@gitlab.your_domain.xyz:username/project-name.git
```

Проверим еще раз:
```bash
git remote -v
```

Теперь вы увидите оба репозитория:
```
gitlab  git@gitlab.your_domain.xyz:username/project-name.git (fetch)
gitlab  git@gitlab.your_domain.xyz:username/project-name.git (push)
origin  git@github.com:username/project-name.git (fetch)
origin  git@github.com:username/project-name.git (push)
```

## Шаг 3: Отправка изменений (Push)

Теперь у вас есть два варианта отправки изменений:

### Вариант А: Отправлять в каждый репозиторий по отдельности

```bash
# Отправляем ветку main на GitHub
git push origin main

# Отправляем ветку main на GitLab
git push gitlab main
```

### Вариант Б: Настроить автоматическую отправку в оба репозитория (рекомендуется)

Вы можете изменить URL для `push` у вашего основного репозитория (`origin`), чтобы он включал в себя и GitLab.

```bash
# Добавляем GitLab URL в список push-адресов для 'origin'
git remote set-url --add --push origin git@gitlab.your_domain.xyz:username/project-name.git
```

После этого команда `git push origin main` будет автоматически отправлять ваши коммиты **сразу и на GitHub, и на GitLab**. Это самый удобный способ поддерживать оба репозитория в синхронизированном состоянии.

## Шаг 4: Удаление связи с удаленным репозиторием

Если вам больше не нужен один из удаленных репозиториев или вы хотите отменить настройку с двойным `push`, это можно легко сделать.

### Вариант А: Полное удаление remote-связи

Чтобы полностью удалить связь с репозиторием (например, с `gitlab`), используйте команду `git remote remove`:

```bash
git remote remove gitlab
```
После этого `git remote -v` больше не будет показывать `gitlab` в списке.

### Вариант Б: Удаление дополнительного push URL

Если вы настраивали автоматическую отправку в оба репозитория (как в шаге 3, вариант Б) и хотите это отменить, вам нужно удалить только дополнительный URL для `push`.

```bash
# Удаляем URL GitLab из списка push-адресов для 'origin'
git remote set-url --delete --push origin git@gitlab.your_domain.xyz:username/project-name.git
```
После этого команда `git push origin main` снова будет отправлять изменения только на GitHub.
