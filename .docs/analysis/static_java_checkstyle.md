# Статический анализ с Checkstyle

## 1. Для чего нужен Checkstyle?

**Checkstyle** — это статический анализатор, который помогает разработчикам придерживаться единого стиля кодирования. В отличие от **PMD**, который ищет потенциальные ошибки и "запахи" в коде, Checkstyle фокусируется исключительно на *внешнем виде* и *форматировании* кода.

Его можно представить как "полицию стиля", которая следит за тем, чтобы код, написанный разными людьми, выглядел единообразно.

**Ключевые цели Checkstyle:**
*   **Единообразие кода:** Гарантирует, что все следуют общим правилам именования, расстановки скобок, отступов и т.д.
*   **Повышение читаемости:** Чистый и отформатированный код легче читать и понимать.
*   **Автоматизация рутины:** Избавляет от необходимости вручную форматировать код и спорить о стилях на код-ревью.

## 2. Какие проверки он выполняет?

Checkstyle проверяет огромное количество правил, сгруппированных по категориям. В нашем проекте (`config/checkstyle/checkstyle.xml`) используется конфигурация, основанная на **Google Java Style Guide**, которая включает проверки на:

*   **Именование:** Правильные форматы для имен классов, методов, переменных (например, `camelCase`, `PascalCase`).
*   **Отступы и пробелы:** Корректное использование пробелов вокруг операторов, правильные отступы (4 пробела).
*   **Длина строк:** Ограничение длины строки (например, 120 символов).
*   **Импорты:** Запрет на "звездочные" импорты (`import java.util.*`), правильный порядок импортов.
*   **Блоки кода:** Обязательное использование фигурных скобок `{}` для `if/else/for`.
*   **Javadoc:** Проверка наличия и формата комментариев Javadoc.

## 3. Настройка для Android

Настройка Checkstyle для Android реализована модульно для поддержания чистоты основного файла сборки.

1.  **Применение и конфигурация (в `gradle/checkstyle.gradle`):**
+
    Чтобы сохранить `app/build.gradle` чистым, вся логика, включая применение плагина и его настройку, вынесена в `gradle/checkstyle.gradle`. В этом файле мы явно указываем версию инструмента:
    ```groovy
    apply plugin: 'checkstyle'

    checkstyle {
        toolVersion = "10.16.0"
    }
    ```

2.  **Создание задач и применение скрипта:**
+
    Сам скрипт `gradle/checkstyle.gradle` применяется в `app/build.gradle` с помощью одной строки:
    ```groovy
    apply from: "$project.rootDir/gradle/checkstyle.gradle"
    ```
    Внутри `gradle/checkstyle.gradle` также находится логика, которая создает задачи `checkstyleDebug`, `checkstyleRelease` и привязывает их к стандартной задаче `check`.

    Это позволяет запускать анализ как для конкретной сборки (`./gradlew app:checkstyleDebug`), так и вместе со всеми остальными проверками (`./gradlew app:check`).